fragment Message on messages {
  id
  sent_at
  guest_name
  content
}

query LatestMessages {
  messages(limit: 30, order_by: { message_number: desc }) {
    ...Message
  }
}

subscription OnNewMessage {
  messages(limit: 1, order_by: { message_number: desc }) {
    ...Message
  }
}

mutation NewMessage($input: messages_insert_input!) {
  insert_messages_one(object: $input) {
    ...Message
  }
}
