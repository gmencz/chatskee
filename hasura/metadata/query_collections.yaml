- name: allowed-queries
  definition:
    queries:
    - name: NewMessage
      query: |-
        mutation NewMessage($input: messages_insert_input!) {
          insert_messages_one(object: $input) {
            ...Message
          }
        }

        fragment Message on messages {
          id
          sent_at
          guest_name
          content
        }
    - name: OnNewMessage
      query: |-
        subscription OnNewMessage {
          messages(limit: 1, order_by: { message_number: desc }) {
            ...Message
          }
        }

        fragment Message on messages {
          id
          sent_at
          guest_name
          content
        }
    - name: LatestMessages
      query: |-
        query LatestMessages {
          messages(limit: 30, order_by: { message_number: desc }) {
            ...Message
          }
        }

        fragment Message on messages {
          id
          sent_at
          guest_name
          content
        }
