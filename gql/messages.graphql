fragment Message on messages {
  id
  content
  guest_name
  created_at
}

query LatestMessages {
  messages(order_by: { message_number: asc }) {
    ...Message
  }
}

subscription OnNewMessage {
  messages(limit: 1, order_by: { created_at: desc }) {
    id
    created_at
  }
}

mutation NewMessage($input: messages_insert_input!) {
  insert_messages_one(object: $input) {
    id
    created_at
  }
}

query MessagesRange($from: timestamptz, $to: timestamptz) {
  messages(
    where: { created_at: { _gt: $from, _lte: $to } }
    order_by: { message_number: asc }
  ) {
    ...Message
  }
}
